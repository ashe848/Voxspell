package voxspell;

import java.io.IOException;

import javax.swing.SwingWorker;

public class Festival {
	private static double festival_speed;
	private static String festival_voice;
	private static Voxspell parent_frame;
	
	public Festival(Voxspell parent){
		parent_frame = parent;
	}
	
	//class responsible for making the festival calls
	public void speak(String speech){
		if (System.getProperty("os.name").equals("Lsinux")) {
			//Was Abby's code.
			SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {
				protected Void doInBackground(){
					//String command = "echo " + speech + "| festival --tts";
					
					String command = "festival -b festival.scm";
					ProcessBuilder pb = new ProcessBuilder("bash", "-c", command);
					try {
						Process p = pb.start();
						p.waitFor(); //waits for the festival call to finish before proceeding as to avoid the speaking overlapping
					} catch (IOException e){
						e.printStackTrace();
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
					return null;
				}
			};
			worker.execute();
		}
		else {
			System.out.println(speech);
		}
	}

	public void setFestivalSpeed(double speed) {
		festival_speed = speed;
	}

	public void setFestivalVoice(String voice) {
		festival_voice = voice;
	}
}
